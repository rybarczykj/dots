(this["webpackJsonpascii-gen"]=this["webpackJsonpascii-gen"]||[]).push([[0],{49:function(e,t,o){},50:function(e,t,o){"use strict";o.r(t);var n=o(0),s=o.n(n),r=o(12),a=o.n(r),l=(o(7),o(14)),i=o(1);var c=e=>{let{label:t,options:o,selectedOption:n,onOptionChange:s}=e;return Object(i.jsxs)("div",{className:"menu-entry",children:[Object(i.jsxs)("div",{className:"menu-entry-label",children:[t,":"]}),Object(i.jsx)(l.a,{options:o,className:"dropdown",onChange:e=>s((null===e||void 0===e?void 0:e.value)||o[0].value),styles:{control:(e,t)=>({...e,minHeight:"5px !important",alignItems:"baseline",width:t.menuIsOpen?"200px":"100px",borderRadius:"2px",padding:"0px"}),dropdownIndicator:(e,t)=>({...e,padding:"0px"}),input:(e,t)=>({...e,padding:"0px"})},components:{IndicatorSeparator:()=>null},menuPosition:"fixed",value:o.find((e=>e.value===n))})]})};const d=e=>{let{title:t,onChange:o,label:n,value:s,min:r,max:a,step:l,disabled:c}=e;if(s>a||s<r)throw new Error(`value ${s} is outside of range ${r} to ${a}`);const d=Math.floor((s-r)/(a-r)*10),u="-".repeat(d),h="-".repeat(10-d);return Object(i.jsxs)("div",{className:"slidecontainer",children:[Object(i.jsx)("p",{children:t}),Object(i.jsxs)("div",{className:"slider-track",children:[Object(i.jsx)("input",{type:"range",min:r,max:a,step:l,value:s,onChange:e=>o(parseFloat(e.target.value)),disabled:c,className:"slider-input"}),"<",Object(i.jsx)("span",{className:"slider-dashes",children:u}),Object(i.jsx)("span",{className:"slider-asterix",children:"*"}),Object(i.jsx)("span",{className:"slider-dashes",children:h}),">"]})]})},u=e=>{let{specs:t,onSpecsChange:o,onResolutionChange:n,contrast:s,onContrastChange:r,brightness:a,onBrightnessChange:l}=e;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(d,{title:"resolution:",onChange:e=>{n(e)},value:t.resolution,min:5,max:500,label:t.resolution.toString().slice(0,5)}),Object(i.jsx)(d,{title:"contrast:",onChange:e=>{r(e)},value:s,min:.1,max:50,step:.1,label:s.toString()}),Object(i.jsx)(d,{title:"brightness:",onChange:e=>{l(e)},value:a,min:-255,max:255,step:1,label:a.toString()}),Object(i.jsx)(d,{title:"zoom:",onChange:e=>{o({...t,zoom:e})},value:t.zoom,min:1,max:10,step:.25,label:t.zoom.toString().slice(0,4)}),Object(i.jsx)(d,{title:"font weight:",onChange:e=>{o({...t,weight:e})},value:t.weight,min:0,max:800,label:t.weight.toString()})]})};var h=o(13),g=o.n(h),p=o(4);const m=function(e,t){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;const r=e.getImageData(0,0,e.canvas.width,e.canvas.height),a=b(r),l=j(a,t,o,n,s);return l},b=e=>{const t=e.data,o=[];for(let n=0;n<e.height;n++){const s=[];for(let o=0;o<e.width;o++){const r=4*(n*e.width+o),a=.2126*t[r]+.7152*t[r+1]+.0722*t[r+2];s.push(a)}o.push(s)}return o},v=e=>{const t=e.data,o=[];for(let n=0;n<e.height;n++){const s=[];for(let o=0;o<e.width;o++){const r=4*(n*e.width+o),a=`rgb(${t[r]}, ${t[r+1]}, ${t[r+2]})`;s.push(a)}o.push(s)}return o},j=function(e,t){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,r="";for(let a=0;a<e.length;a++){for(let l=0;l<e[a].length;l++){const i=e[a][l],c=s?Math.max(Math.min(i+s,255),0):i,d=n?Math.max(Math.min((c-127.5)*n,255),0):c,u=Math.floor(d/255*(t.length-1));r+=o?t[t.length-u-1]:t[u]}r+="\n"}return r},f=function(e,t,o){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0,a="";const l=[];for(let i=0;i<e.length;i++){for(let c=0;c<e[i].length;c++){const d=e[i][c],u=t[i][c],h=r?Math.max(Math.min(d+r,255),0):d,g=s?Math.max(Math.min((h-127.5)*s,255),0):h,p=Math.floor(g/255*(o.length-1));a+=n?o[o.length-p-1]:o[p],l.push(u)}a+="\n",l.push("")}return{ascii:a,colors:l}};o(49);const C=e=>{let{children:t,onDrop:o}=e;return Object(i.jsx)("div",{onDrop:e=>{if(e.preventDefault(),e.stopPropagation(),e.dataTransfer){const t=e.dataTransfer.files[0];o(t)}},onDragOver:e=>e.preventDefault(),children:t})},x=["8M0|*|::`,.","M80*|:,.` ","$H2a?+.   ","8+::`..","+-:`  ","\u2593\u2592\u2592\u2591\u2591 ","\u2591\u2592\u2593\u2594\u2595\u2596\u2597\u2598\u2599\u259a\u259b\u259c\u259d\u259e\u259f ","\u2591\u2592\u2593\u2588\u2584\u2580\u2502\u2524\u2563\u2551\u255a\u2554\u2557\u255d\u2510\u2569\u2514\u2566\u2560\u2534\u2550\u252c\u251c\u256c\u2500\u253c\u2518\u250c\xa6\u253c\u2514\u2534\u252c\u251c\u2510","$@WgBMQNR8%0&\u0111D#OGKEHdbmSqpAPwU54ZX96f23kVhaeFCj1IoJyst7}{YnulzriTx?][*Lcv\xd7<>)(/+=\xf7\u201c\u201d!;:\u2018,\u2019-.","\u262eBbeo- ","\u262e8O0o:. ","\u2665\u2667\u2662\u2670\u267a ","\u262e!*-\xb7   ",["8 ","M ","0 ","# ","$ ","| ","* ","+ ",": ",": ","` ",". ",". "]].map((e=>({value:e,label:e}))),O=e=>{let{specs:t,onSpecsChange:o,onCopy:n,onImageUpload:s,onVideoUpload:r,onResolutionChange:a,palette:l,onPaletteChange:d,isColorInverted:h,onColorInvertedToggle:p,contrast:m,onContrastChange:b,brightness:v,onBrightnessChange:j,useColors:f,onUseColorsToggle:O}=e;const y=e=>{if("image/heic"===e.type)try{g()({blob:e,toType:"image/jpeg"}).then((t=>{const o=new File([t],e.name.replace(".heic",".jpg"),{type:"image/jpeg"});s(o)}))}catch(t){console.error("Error converting HEIC image:",t)}else s(e)};return Object(i.jsx)(C,{onDrop:y,children:Object(i.jsx)("div",{className:"flex-row",children:Object(i.jsxs)("div",{className:"menu",children:[Object(i.jsxs)("div",{className:"menu-entry",children:[Object(i.jsx)("label",{htmlFor:"file-upload",className:"clickable-button",children:"Upload an image"}),Object(i.jsx)("input",{id:"file-upload",type:"file",accept:"image/*, .heic",onChange:e=>{var t;const o=null===(t=e.target.files)||void 0===t?void 0:t[0];o&&y(o)}})]}),Object(i.jsxs)("div",{className:"menu-entry",children:[Object(i.jsx)("label",{htmlFor:"video-upload",className:"clickable-button",children:"Upload a video"}),Object(i.jsx)("input",{id:"video-upload",type:"file",accept:"video/*",onChange:e=>{var t;const o=null===(t=e.target.files)||void 0===t?void 0:t[0];o&&r(o)}})]}),Object(i.jsx)(u,{specs:t,onSpecsChange:o,onResolutionChange:a,contrast:m,onContrastChange:b,brightness:v,onBrightnessChange:j}),Object(i.jsx)(c,{label:"palette",options:x,selectedOption:l,onOptionChange:d}),Object(i.jsx)(c,{label:"font",options:R.map((e=>({value:e,label:e}))),selectedOption:t.fontFamily,onOptionChange:e=>{o({...t,fontFamily:e})}}),Object(i.jsx)("form",{children:Object(i.jsx)("div",{className:"menu-entry",children:Object(i.jsxs)("div",{className:"checkboxes",children:[Object(i.jsxs)("label",{children:[Object(i.jsx)("input",{type:"checkbox",checked:h,onChange:p}),"inverse?"]}),Object(i.jsxs)("label",{children:[Object(i.jsx)("input",{type:"checkbox",checked:f,onChange:O}),"use colors?"]})]})})}),Object(i.jsxs)("div",{className:"menu-entry",children:[Object(i.jsx)("label",{htmlFor:"clipboard-button",className:"clickable-button",children:"Save to clipboard"}),Object(i.jsx)("button",{id:"clipboard-button",className:"hidden-button",onClick:n})]})]})})})},y=e=>{const{specs:t,onAsciiChange:o,onSpecsChange:n}=e,[r,a]=s.a.useState(),[l,c]=s.a.useState(!1),d=s.a.useRef([]),u=s.a.useRef([]),h=e=>{let{palette:s,isColorInverted:r,resolution:a,file:l,contrast:i,brightness:c,resetLookups:h,useColors:g}=e;l&&(e=>{const t=e.file,o=e.maxWidth,n=new FileReader,s=new Image,r=document.createElement("canvas");return new Promise(((e,a)=>{t.type.match(/image.*/)?(n.onload=t=>{s.onload=()=>e(((e,t,o)=>{let n=e.width,s=e.height;s>t&&(n*=t/s,s=t),s*=.6,o.width=n,o.height=s;const r=o.getContext("2d");return null===r||void 0===r||r.drawImage(e,0,0,n,s),o})(s,o,r)),s.src=t.target.result},n.readAsDataURL(t)):a(new Error("Not an image"))}))})({file:l,maxWidth:a}).then((e=>{const l=e.getContext("2d",{willReadFrequently:!0}),p=null===l||void 0===l?void 0:l.getImageData(0,0,e.width,e.height);if(p){if(h&&(d.current=b(p),u.current=v(p)),g){const e=f(d.current,u.current,s,r,i,c);o(e.ascii,a,e.colors)}else{const e=j(d.current,s,r,i,c);o(e,a)}n({...t,resolution:a})}}))},g=Object(p.debounce)((t=>{l?e.onSpecsChange({...e.specs,resolution:t}):h({palette:e.palette,isColorInverted:e.isColorInverted,resolution:t,file:r,contrast:e.contrast,brightness:e.brightness,resetLookups:!0,useColors:e.useColors})}),5),m=Object(p.debounce)((o=>{l?e.onContrastChange(o):h({palette:e.palette,isColorInverted:e.isColorInverted,resolution:t.resolution,file:r,contrast:o,brightness:e.brightness,resetLookups:!1,useColors:e.useColors})}),5),C=Object(p.debounce)((o=>{l?e.onBrightnessChange(o):h({palette:e.palette,isColorInverted:e.isColorInverted,resolution:t.resolution,file:r,contrast:e.contrast,brightness:o,resetLookups:!1,useColors:e.useColors})}),5);return Object(i.jsx)(O,{...e,onResolutionChange:g,onImageUpload:o=>{c(!1),h({palette:e.palette,isColorInverted:e.isColorInverted,resolution:t.resolution,file:o,contrast:e.contrast,brightness:e.brightness,resetLookups:!0,useColors:e.useColors}),a(o)},onVideoUpload:t=>{e.onVideoUpload(t),c(!0),a(t)},palette:e.palette,onPaletteChange:o=>{e.onPaletteChange(o),l||h({palette:o,isColorInverted:e.isColorInverted,resolution:t.resolution,file:r,brightness:e.brightness,contrast:e.contrast,resetLookups:!1,useColors:e.useColors})},isColorInverted:e.isColorInverted,onColorInvertedToggle:()=>{e.onColorInvertedToggle(),l||h({palette:e.palette,isColorInverted:!e.isColorInverted,resolution:t.resolution,file:r,brightness:e.brightness,contrast:e.contrast,resetLookups:!1,useColors:e.useColors})},contrast:e.contrast,onContrastChange:t=>{e.onContrastChange(t),m(t)},brightness:e.brightness,onBrightnessChange:t=>{e.onBrightnessChange(t),C(t)},useColors:e.useColors,onUseColorsToggle:()=>{e.onUseColorsToggle(),l||h({palette:e.palette,isColorInverted:e.isColorInverted,resolution:t.resolution,file:r,brightness:e.brightness,contrast:e.contrast,resetLookups:!1,useColors:!e.useColors})}})},w=e=>{let{ascii:t,colors:o,style:n}=e;const s=t.split("\n");let r=0;return Object(i.jsx)("div",{className:"ascii",style:n,children:s.map(((e,t)=>Object(i.jsx)("div",{children:e.split("").map(((e,t)=>{let n="inherit";for(;r<o.length&&""===o[r];)r++;return r<o.length&&(n=o[r],r++),Object(i.jsx)("span",{style:{color:n},children:e},t)}))},t)))})},I=e=>{let{videoElement:t,palette:o,asciiResolution:n,isColorInverted:r,contrast:a,brightness:l,useColors:c=!1,frameRate:d=10,style:u,aspectRatioMultiplier:h=.6}=e;s.a.useEffect((()=>{console.log("asciiResolution",n)}),[n]);const[g,p]=s.a.useState(null),j=s.a.useRef(null),C=s.a.useRef(null),x=s.a.useRef(null),O=s.a.useRef(0),y=s.a.useRef(0),I=s.a.useRef(!1);s.a.useEffect((()=>{if(j.current&&!I.current){const e=j.current.getContext("2d",{willReadFrequently:!0});e&&(C.current=e,I.current=!0)}}),[]);const S=s.a.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{if(!t||!C.current||!j.current)return;const s=t,i=C.current,d=j.current;if(!e&&Math.abs(s.currentTime-y.current)<.05)return;e||(y.current=s.currentTime);const u=s.videoWidth/s.videoHeight,g=n,x=Math.floor(h*g/u);if(d.width===g&&d.height===x||(d.width=g,d.height=x),i.drawImage(s,0,0,g,x),c){const e=i.getImageData(0,0,g,x),t=b(e),n=v(e),s=f(t,n,o,r,a,l);p(s)}else{const e=m(i,o,r,a,l);p(e)}}catch(s){console.error("Error processing video frame:",s),p("Error processing video")}}),[t,n,o,r,a,l,c]);s.a.useEffect((()=>{if(!t||t.readyState<2)return;const e=o=>{if(!t)return void(x.current=requestAnimationFrame(e));o-O.current>=1e3/d&&(S(),O.current=o),x.current=requestAnimationFrame(e)};return x.current=requestAnimationFrame(e),()=>{x.current&&cancelAnimationFrame(x.current)}}),[t,S,d]),s.a.useEffect((()=>{t&&t.readyState>=2&&S()}),[t,S]),s.a.useEffect((()=>{t&&t.readyState>=2&&S(!0)}),[o,n,r,a,l,c,S]);return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("canvas",{ref:j,style:{position:"absolute",left:"-9999px",top:"-9999px",width:"1px",height:"1px",opacity:0,pointerEvents:"none"}}),!g||!t||t.readyState<2?Object(i.jsx)("div",{className:"ascii",style:u,children:"Loading..."}):"string"===typeof g?Object(i.jsx)("div",{className:"ascii",style:u,children:g}):Object(i.jsx)(w,{ascii:g.ascii,colors:g.colors,style:u||{}})]})},S=e=>{let{videoFile:t,onVideoElementReady:o,onError:n}=e;const r=s.a.useRef(null);return s.a.useEffect((()=>{if(!t||!r.current)return;const e=r.current,s=URL.createObjectURL(t),a=()=>{console.log("Video loaded metadata - calling onVideoElementReady"),o(e),e.play().catch((e=>{console.warn("Auto-play failed:",e),null===n||void 0===n||n("Auto-play failed: "+e.message)}))},l=e=>{var t;const o=e.target;console.error("Video loading error:",o.error),null===n||void 0===n||n("Failed to load video file: "+((null===(t=o.error)||void 0===t?void 0:t.message)||"Unknown error"))},i=()=>{e.currentTime=0,e.play().catch((e=>{console.warn("Loop play failed:",e),null===n||void 0===n||n("Loop play failed: "+e.message)}))};return e.addEventListener("loadedmetadata",a),e.addEventListener("error",l),e.addEventListener("ended",i),e.src=s,()=>{e.removeEventListener("loadedmetadata",a),e.removeEventListener("error",l),e.removeEventListener("ended",i),URL.revokeObjectURL(s)}}),[t,o,n]),t?Object(i.jsx)("video",{ref:r,style:{display:"none"},controls:!1,muted:!0,playsInline:!0,loop:!0}):null},R=["Ibm Plex Mono","Azeret Mono","Space Mono","Roboto Mono","Courier New","Monaco","Arial","Helvetica"],F=e=>{let{ascii:t,colors:o,style:n}=e;const s=t.split("\n");let r=0;return Object(i.jsx)("div",{className:"ascii",style:n,children:s.map(((e,t)=>Object(i.jsx)("div",{children:e.split("").map(((e,t)=>{let n="inherit";for(;r<o.length&&""===o[r];)r++;return r<o.length&&(n=o[r],r++),Object(i.jsx)("span",{style:{color:n},children:e},t)}))},t)))})};var N=()=>{const[e,t]=s.a.useState({fontSize:30,resolution:100,width:700,zoom:1,weight:400,fontFamily:"Ibm Plex Mono",kerning:0,lineHeight:1}),[o,n]=s.a.useState(null),[r,a]=s.a.useState(null),[l,c]=s.a.useState(!1),[d,u]=s.a.useState(""),[h,g]=s.a.useState([]),[p,j]=s.a.useState("8M0|*|::`,."),[C,x]=s.a.useState(!1),[O,w]=s.a.useState(!1),[R,N]=s.a.useState(1),[k,E]=s.a.useState(0),M=1e3/e.resolution;return Object(i.jsxs)("div",{className:"flex-container",children:[Object(i.jsx)(y,{specs:e,onSpecsChange:t,onAsciiChange:(e,t,o)=>{"string"===typeof e&&(u(e),g(o||[]))},onCopy:()=>{const e=l?"Video streaming - use browser copy on the ASCII output":d;navigator.clipboard.writeText(e)},onVideoUpload:e=>{console.log("handleVideoUpload called with file:",e.name),n(e),c(!0),u(""),g([])},onImageUpload:t=>{n(null),c(!1);const o=document.createElement("canvas"),s=o.getContext("2d"),r=new Image;r.onload=()=>{const t=r.width/r.height,n=e.resolution,a=Math.floor(.6*n/t);if(o.width=n,o.height=a,null===s||void 0===s||s.drawImage(r,0,0,n,a),O){const e=null===s||void 0===s?void 0:s.getImageData(0,0,n,a);if(e){const t=b(e),o=v(e),n=f(t,o,p,C,R,k);u(n.ascii),g(n.colors)}}else if(s){const e=m(s,p,C,R,k);u(e),g([])}},r.src=URL.createObjectURL(t)},palette:p,onPaletteChange:j,isColorInverted:C,onColorInvertedToggle:()=>x((e=>!e)),contrast:R,onContrastChange:N,brightness:k,onBrightnessChange:E,useColors:O,onUseColorsToggle:()=>w((e=>!e))}),Object(i.jsx)(S,{videoFile:o,onVideoElementReady:a}),Object(i.jsx)("pre",{children:l&&r?Object(i.jsx)(I,{videoElement:r,palette:p,asciiResolution:e.resolution,isColorInverted:C,contrast:R,brightness:k,useColors:O,frameRate:10,style:{fontSize:1*M*e.zoom+"px",lineHeight:M*e.zoom+"px",fontWeight:e.weight,fontFamily:e.fontFamily,letterSpacing:`${e.kerning}px`},aspectRatioMultiplier:.6}):d?h.length>0?Object(i.jsx)(F,{ascii:d,colors:h,style:{fontSize:1*M*e.zoom+"px",lineHeight:M*e.zoom+"px",fontWeight:e.weight,fontFamily:e.fontFamily,letterSpacing:`${e.kerning}px`}}):Object(i.jsx)("div",{className:"ascii",style:{fontSize:1*M*e.zoom+"px",lineHeight:M*e.zoom+"px",fontWeight:e.weight,fontFamily:e.fontFamily,letterSpacing:`${e.kerning}px`},children:d}):Object(i.jsx)("div",{className:"ascii",style:{fontSize:1*M*e.zoom+"px",lineHeight:M*e.zoom+"px",fontWeight:e.weight,fontFamily:e.fontFamily,letterSpacing:`${e.kerning}px`},children:"'((-.-)/^'"})})]})};var k=e=>{e&&e instanceof Function&&o.e(3).then(o.bind(null,51)).then((t=>{let{getCLS:o,getFID:n,getFCP:s,getLCP:r,getTTFB:a}=t;o(e),n(e),s(e),r(e),a(e)}))};a.a.createRoot(document.getElementById("root")).render(Object(i.jsx)(s.a.StrictMode,{children:Object(i.jsx)(N,{})})),k()},7:function(e,t,o){}},[[50,1,2]]]);
//# sourceMappingURL=main.b3e291c9.chunk.js.map