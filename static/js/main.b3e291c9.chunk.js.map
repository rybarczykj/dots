{"version":3,"sources":["ui/Dropdown/Dropdown.tsx","ui/Slider/Slider.tsx","ui/SliderSection/SliderSection.tsx","ascii-utils.tsx","ui/Menu/DragDropFiles.tsx","ui/Menu/Menu.tsx","video/asciiVideo.tsx","video/streaming-video-processor.tsx","App.tsx","reportWebVitals.js","index.js"],"names":["Dropdown","label","options","selectedOption","onOptionChange","className","onChange","option","value","styles","control","baseStyles","state","minHeight","alignItems","width","menuIsOpen","borderRadius","padding","dropdownIndicator","input","components","IndicatorSeparator","menuPosition","find","Slider","title","min","max","step","disabled","Error","normalizedValue","Math","floor","leftDashes","repeat","rightDashes","type","e","parseFloat","target","SliderSection","specs","onSpecsChange","onResolutionChange","contrast","onContrastChange","brightness","onBrightnessChange","resolution","toString","slice","newContrast","newBrightness","newZoom","zoom","newWeight","weight","getAsciiFromContext","context","asciiChars","inverse","imageData","getImageData","canvas","height","greyscale","getGreyscale","ascii","getAsciiFromGreyscale","data","pixels","y","greyscaleRow","x","pixelIndex","luminance","push","getColors","colors","colorRow","color","length","adjustedLuminance","contrastedLuminance","asciiIndex","getColoredAsciiFromGreyscale","colorArray","DragDropFiles","children","onDrop","preventDefault","stopPropagation","dataTransfer","file","files","onDragOver","asciiOptions","map","char","Menu","onCopy","onImageUpload","onVideoUpload","palette","onPaletteChange","isColorInverted","onColorInvertedToggle","useColors","onUseColorsToggle","imageUploadHandler","imageFile","heic2any","blob","toType","then","convertedBlob","convertedFile","File","name","replace","error","console","htmlFor","id","accept","event","myFile","videoFile","Fonts","font","fontFamily","checked","onClick","MenuContainer","props","onAsciiChange","currentFile","setCurrentFile","React","useState","isAsciiVideo","setIsAsciiVideo","useRef","updateAscii","resetLookups","settings","maxWidth","reader","FileReader","image","Image","document","createElement","Promise","ok","no","match","onload","readerEvent","maxHeight","getContext","drawImage","resize","src","result","readAsDataURL","resizeImage","willReadFrequently","current","coloredAscii","newAscii","debouncedOnResolutionChange","debounce","debouncedOnContrastChange","debouncedOnBrightnessChange","newPalette","ColoredAscii","style","lines","split","colorIndex","line","lineIndex","charIndex","StreamingAsciiVideo","videoElement","asciiResolution","frameRate","aspectRatioMultiplier","useEffect","log","currentFrame","setCurrentFrame","canvasRef","contextRef","animationFrameRef","lastFrameTimeRef","lastProcessedTimeRef","canvasInitializedRef","processFrame","useCallback","forceUpdate","video","abs","currentTime","aspectRatio","videoWidth","videoHeight","coloredFrame","frameAscii","readyState","animate","requestAnimationFrame","cancelAnimationFrame","ref","position","left","top","opacity","pointerEvents","StreamingVideoProcessor","onVideoElementReady","onError","videoRef","videoUrl","URL","createObjectURL","handleLoadedMetadata","play","catch","warn","message","handleError","handleEnded","addEventListener","removeEventListener","revokeObjectURL","display","controls","muted","playsInline","loop","App","setSpecs","fontSize","kerning","lineHeight","setVideoFile","setVideoElement","isStreamingVideo","setIsStreamingVideo","imageAscii","setImageAscii","imageColors","setImageColors","selectedPalette","setSelectedPalette","setIsColorInverted","setUseColors","setContrast","setBrightness","asciiData","textToCopy","navigator","clipboard","writeText","img","v","fontWeight","letterSpacing","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","getElementById","render","StrictMode"],"mappings":"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","file":"static/js/main.b3e291c9.chunk.js","sourcesContent":["import React from 'react';\nimport CreatableSelect from 'react-select/creatable';\n\ninterface DropdownProps<T> {\n    label: string;\n    options: {\n        value: T;\n        label: T;\n    }[];\n    selectedOption: T;\n    onOptionChange: (option: T) => void;\n}\n\nconst Dropdown = <T,>({\n    label,\n    options,\n    selectedOption,\n    onOptionChange,\n}: DropdownProps<T>): JSX.Element => {\n    return (\n        <div className=\"menu-entry\">\n            <div className=\"menu-entry-label\">{label}:</div>\n            <CreatableSelect\n                options={options}\n                className=\"dropdown\"\n                onChange={(option) => onOptionChange(option?.value || options[0].value)}\n                styles={{\n                    control: (baseStyles, state) => ({\n                        ...baseStyles,\n                        minHeight: '5px !important',\n                        alignItems: 'baseline',\n                        width: state.menuIsOpen ? '200px' : '100px',\n                        borderRadius: '2px',\n                        padding: '0px',\n                    }),\n                    dropdownIndicator: (baseStyles, state) => ({\n                        ...baseStyles,\n                        padding: '0px',\n                    }),\n                    input: (baseStyles, state) => ({\n                        ...baseStyles,\n                        padding: '0px',\n                    }),\n                }}\n                components={{ IndicatorSeparator: () => null }}\n                menuPosition=\"fixed\"\n                value={options.find((option) => option.value === selectedOption)}\n            />\n        </div>\n    );\n};\n\nexport default Dropdown;\n","import React from 'react';\n\ninterface SliderProps {\n    title: string;\n    onChange: (newValue: number) => void;\n    label: string;\n    // eslint-disable-next-line\n    value: any;\n    min: number;\n    max: number;\n    step?: number;\n    disabled?: boolean;\n}\n\nexport const Slider: React.FC<SliderProps> = ({\n    title,\n    onChange,\n    label,\n    value,\n    min,\n    max,\n    step,\n    disabled,\n}) => {\n    const sliderLength = 10;\n    if (value > max || value < min) {\n        throw new Error(`value ${value} is outside of range ${min} to ${max}`);\n    }\n\n    const normalizedValue = Math.floor(((value - min) / (max - min)) * sliderLength);\n\n    const leftDashes = '-'.repeat(normalizedValue);\n    const rightDashes = '-'.repeat(sliderLength - normalizedValue);\n\n    return (\n        <div className=\"slidecontainer\">\n            <p>{title}</p>\n            <div className=\"slider-track\">\n                <input\n                    type=\"range\"\n                    min={min}\n                    max={max}\n                    step={step}\n                    value={value}\n                    onChange={(e) => onChange(parseFloat(e.target.value))}\n                    disabled={disabled}\n                    className=\"slider-input\"\n                />\n                {`<`}\n                <span className=\"slider-dashes\">{leftDashes}</span>\n                <span className=\"slider-asterix\">*</span>\n                <span className=\"slider-dashes\">{rightDashes}</span>\n                {`>`}\n                {/* <output>{value}</output> */}\n            </div>\n        </div>\n    );\n};\n","import { Slider } from '../Slider/Slider';\nimport React from 'react';\nimport { SpecsState } from '../../App';\n\nexport const SliderSection: React.FC<{\n    specs: SpecsState;\n    onSpecsChange: (specs: SpecsState) => void;\n    onResolutionChange: (resolution: number) => void;\n    contrast: number;\n    onContrastChange: (contrast: number) => void;\n    brightness: number; // Added brightness prop\n    onBrightnessChange: (brightness: number) => void; // Added onBrightnessChange prop\n}> = ({\n    specs,\n    onSpecsChange,\n    onResolutionChange,\n    contrast,\n    onContrastChange,\n    brightness,\n    onBrightnessChange,\n}) => {\n        // TODO: consider using an exponential scale for resolution\n        return (\n            <>\n                <Slider\n                    title={'resolution:'}\n                    onChange={(resolution) => {\n                        onResolutionChange(resolution);\n                    }}\n                    value={specs.resolution}\n                    min={5}\n                    max={500}\n                    label={specs.resolution.toString().slice(0, 5)}\n                />\n\n                <Slider\n                    title={'contrast:'}\n                    onChange={(newContrast) => {\n                        onContrastChange(newContrast);\n                    }}\n                    value={contrast}\n                    min={0.1}\n                    max={50}\n                    step={0.1}\n                    label={contrast.toString()}\n                />\n\n                <Slider\n                    title={'brightness:'}\n                    onChange={(newBrightness) => {\n                        onBrightnessChange(newBrightness);\n                    }}\n                    value={brightness}\n                    min={-255}\n                    max={255}\n                    step={1}\n                    label={brightness.toString()}\n                />\n\n                <Slider\n                    title={'zoom:'}\n                    onChange={(newZoom) => {\n                        onSpecsChange({ ...specs, zoom: newZoom });\n                    }}\n                    value={specs.zoom}\n                    min={1}\n                    max={10}\n                    step={0.25}\n                    label={specs.zoom.toString().slice(0, 4)}\n                />\n\n                <Slider\n                    title={'font weight:'}\n                    onChange={(newWeight) => {\n                        onSpecsChange({ ...specs, weight: newWeight });\n                    }}\n                    value={specs.weight}\n                    min={0}\n                    max={800}\n                    label={specs.weight.toString()}\n                />\n                {/* <Slider\n                title={'line height:'}\n                onChange={(newLineHeight) => {\n                    onSpecsChange({ ...specs, lineHeight: newLineHeight });\n                }}\n                value={specs.lineHeight}\n                min={0.1}\n                max={200}\n                step={0.1}\n                label={specs.lineHeight.toString()}\n            /> */}\n            </>\n        );\n    };\n","// const asciiChars = '+::`..';\n// const asciiChars =\n//     '$@WgBMQNR8%0&đD#OGKEHdbmSqpAPwU54ZX96f23kVhaeFCj1IoJyst7}{YnulzriTx?][*Lcv×<>)(/+=÷“”!;:‘,’-.';\n\n// const asciiChars = '▓▒▒░░';\n// const asciiChars = ['8 ', 'M ', '0 ', '# ', '$ ', '| ', '* ', '+ ', ': ', ': ', '` ', '. ', '. '];\n\n// const asciiChars = '$@B%8&WM#*oahkbdpqwmZO0QLCJUYXzcvunxrjft/|()1{}[]?-_+~<>i!lI;:,\"^`\\'.';\n// const asciiChars = '+-:`  ';\n['8 ', 'M ', '0 ', '# ', '$ ', '| ', '* ', '+ ', ': ', ': ', '` ', '. ', '. '];\n\n// export const ASCIICHARS = [\n//     '8M0|*|::`,.',\n//     '+::`..',\n//     '+-:`  ',\n//     '▓▒▒░░',\n//     '$@B%8&WM#*oahkbdpqwmZO0QLCJUYXzcvunxrjft/|()1{}[]?-_+~<>i!lI;:,\"^`\\'.',\n//     '$@WgBMQNR8%0&đD#OGKEHdbmSqpAPwU54ZX96f23kVhaeFCj1IoJyst7}{YnulzriTx?][*Lcv×<>)(/+=÷“”!;:‘,’-.',\n// ];\n\n// const asciiChars = '8M0#$|*|::`,.';\n// const asciiChars = '#8?0+:.,';\n// const asciiChars = '8#|:.';\n\nexport const getAsciiFromContext = (\n    context: CanvasRenderingContext2D,\n    asciiChars: string | string[],\n    inverse = false,\n    contrast: number,\n    brightness: number,\n): string => {\n    const imageData = context.getImageData(0, 0, context.canvas.width, context.canvas.height);\n    const greyscale = getGreyscale(imageData);\n    const ascii = getAsciiFromGreyscale(greyscale, asciiChars, inverse, contrast, brightness);\n    return ascii;\n};\n\nexport const getGreyscale = (data: ImageData): number[][] => {\n    const pixels = data.data;\n\n    const greyscale = [];\n    for (let y = 0; y < data.height; y++) {\n        const greyscaleRow = [];\n        for (let x = 0; x < data.width; x++) {\n            const pixelIndex = (y * data.width + x) * 4;\n            // perceived luminance acccording to https://en.wikipedia.org/wiki/Relative_luminance\n            const luminance =\n                0.2126 * pixels[pixelIndex] +\n                0.7152 * pixels[pixelIndex + 1] +\n                0.0722 * pixels[pixelIndex + 2];\n\n            greyscaleRow.push(luminance);\n        }\n        greyscale.push(greyscaleRow);\n    }\n    return greyscale;\n};\n\nexport const getColors = (data: ImageData): string[][] => {\n    const pixels = data.data;\n    const colors = [];\n\n    for (let y = 0; y < data.height; y++) {\n        const colorRow = [];\n        for (let x = 0; x < data.width; x++) {\n            const pixelIndex = (y * data.width + x) * 4;\n            const r = pixels[pixelIndex];\n            const g = pixels[pixelIndex + 1];\n            const b = pixels[pixelIndex + 2];\n            const color = `rgb(${r}, ${g}, ${b})`;\n            colorRow.push(color);\n        }\n        colors.push(colorRow);\n    }\n    return colors;\n};\n\nexport const getAsciiFromGreyscale = (\n    greyscale: number[][],\n    asciiChars: string | string[],\n    inverse = false,\n    contrast: number,\n    brightness: number,\n): string => {\n    let ascii = '';\n    // iterate over each row, and each pixel in the row\n    for (let y = 0; y < greyscale.length; y++) {\n        for (let x = 0; x < greyscale[y].length; x++) {\n            const luminance = greyscale[y][x];\n\n            const adjustedLuminance = brightness\n                ? Math.max(Math.min(luminance + brightness, 255), 0)\n                : luminance;\n\n            const contrastedLuminance = contrast\n                ? Math.max(Math.min((adjustedLuminance - 127.5) * contrast, 255), 0)\n                : adjustedLuminance;\n\n            const asciiIndex = Math.floor((contrastedLuminance / 255) * (asciiChars.length - 1));\n            if (inverse) {\n                ascii += asciiChars[asciiChars.length - asciiIndex - 1];\n            } else {\n                ascii += asciiChars[asciiIndex];\n            }\n        }\n        ascii += '\\n';\n    }\n    return ascii;\n};\n\nexport const getColoredAsciiFromGreyscale = (\n    greyscale: number[][],\n    colors: string[][],\n    asciiChars: string | string[],\n    inverse = false,\n    contrast: number,\n    brightness: number,\n): { ascii: string; colors: string[] } => {\n    let ascii = '';\n    const colorArray: string[] = [];\n\n    // iterate over each row, and each pixel in the row\n    for (let y = 0; y < greyscale.length; y++) {\n        for (let x = 0; x < greyscale[y].length; x++) {\n            const luminance = greyscale[y][x];\n            const color = colors[y][x];\n\n            const adjustedLuminance = brightness\n                ? Math.max(Math.min(luminance + brightness, 255), 0)\n                : luminance;\n\n            const contrastedLuminance = contrast\n                ? Math.max(Math.min((adjustedLuminance - 127.5) * contrast, 255), 0)\n                : adjustedLuminance;\n\n            const asciiIndex = Math.floor((contrastedLuminance / 255) * (asciiChars.length - 1));\n            const char = inverse\n                ? asciiChars[asciiChars.length - asciiIndex - 1]\n                : asciiChars[asciiIndex];\n\n            ascii += char;\n            colorArray.push(color);\n        }\n        ascii += '\\n';\n        colorArray.push(''); // empty color for newline\n    }\n    return { ascii, colors: colorArray };\n};\n\nconst resize = (image: HTMLImageElement, maxHeight: number, canvas: HTMLCanvasElement) => {\n    let width = image.width;\n    let height = image.height;\n\n    if (height > maxHeight) {\n        width *= maxHeight / height;\n        height = maxHeight;\n    }\n    // 0.6 because the ascii characters are taller than they are wide\n    height *= 0.6;\n\n    canvas.width = width;\n    canvas.height = height;\n    const context = canvas.getContext('2d');\n    context?.drawImage(image, 0, 0, width, height);\n    return canvas;\n};\n\ninterface IResizeImageOptions {\n    maxWidth: number;\n    file: File;\n}\n\n// Returns a Canvas with the image resized to be under MaxHeight\nexport const resizeImage = (settings: IResizeImageOptions): Promise<HTMLCanvasElement> => {\n    const file = settings.file;\n    const maxWidth = settings.maxWidth;\n    const reader = new FileReader();\n    const image = new Image();\n    const canvas = document.createElement('canvas');\n\n    return new Promise<HTMLCanvasElement>((ok, no) => {\n        if (!file.type.match(/image.*/)) {\n            no(new Error('Not an image'));\n            return;\n        }\n\n        reader.onload = (readerEvent: any) => {\n            image.onload = () => ok(resize(image, maxWidth, canvas));\n            image.src = readerEvent.target.result;\n        };\n        reader.readAsDataURL(file);\n    });\n};\n","import React, { ReactElement } from 'react';\n\n// wrapper around children to allow drag and drop of files\nexport const DragDropFiles = ({\n    children,\n    onDrop,\n}: {\n    children: React.ReactNode;\n    onDrop: (file: File) => void;\n}): ReactElement => {\n    const onDropHandler = (e: any) => {\n        e.preventDefault();\n        e.stopPropagation();\n        if (e.dataTransfer) {\n            const file = e.dataTransfer.files[0];\n            onDrop(file);\n        }\n    };\n\n    const onDragOverHandler = (e: any) => e.preventDefault();\n\n    return (\n        <div onDrop={onDropHandler} onDragOver={onDragOverHandler}>\n            {children}\n        </div>\n    );\n};\n","import { ReactElement } from 'react';\nimport Dropdown from '../Dropdown/Dropdown';\nimport { SliderSection } from '../SliderSection/SliderSection';\nimport { Font, Fonts, SpecsState } from '../../App';\nimport heic2any from 'heic2any';\nimport React from 'react';\n\nimport { debounce } from 'lodash';\nimport { getAsciiFromGreyscale, getGreyscale, resizeImage, getColors, getColoredAsciiFromGreyscale } from '../../ascii-utils';\nimport './menu.css';\nimport { DragDropFiles } from './DragDropFiles';\n\nexport const ASCIICHARS = [\n    '8M0|*|::`,.',\n    'M80*|:,.` ',\n    '$H2a?+.   ',\n    '8+::`..',\n    '+-:`  ',\n    '▓▒▒░░ ',\n    '░▒▓▔▕▖▗▘▙▚▛▜▝▞▟ ',\n    '░▒▓█▄▀│┤╣║╚╔╗╝┐╩└╦╠┴═┬├╬─┼┘┌¦┼└┴┬├┐',\n    '$@WgBMQNR8%0&đD#OGKEHdbmSqpAPwU54ZX96f23kVhaeFCj1IoJyst7}{YnulzriTx?][*Lcv×<>)(/+=÷“”!;:‘,’-.',\n    '☮Bbeo- ',\n    '☮8O0o:. ',\n    '♥♧♢♰♺ ',\n    '☮!*-·   ',\n    ['8 ', 'M ', '0 ', '# ', '$ ', '| ', '* ', '+ ', ': ', ': ', '` ', '. ', '. '],\n];\n\nconst asciiOptions = ASCIICHARS.map((char) => ({ value: char, label: char }));\n\ninterface MenuContainerProps {\n    onAsciiChange: (ascii: string | string[] | { ascii: string; colors: string[] }[], resolution: number, colors?: string[]) => void;\n    specs: SpecsState;\n    onSpecsChange: (specs: SpecsState) => void;\n    onCopy: () => void;\n    onVideoUpload: (file: File) => void;\n    onImageUpload: (file: File) => void;\n    palette: string | string[];\n    onPaletteChange: (palette: string | string[]) => void;\n    isColorInverted: boolean;\n    onColorInvertedToggle: () => void;\n    contrast: number;\n    onContrastChange: (contrast: number) => void;\n    brightness: number;\n    onBrightnessChange: (brightness: number) => void;\n    useColors: boolean;\n    onUseColorsToggle: () => void;\n}\n\n// extend MenuContainerProps\ninterface MenuProps extends Omit<MenuContainerProps, 'onAsciiChange'> {\n    onImageUpload: (file: File) => void;\n    onVideoUpload: (video: File) => void;\n    onResolutionChange: (resolution: number) => void;\n    palette: string | string[];\n    onPaletteChange: (palette: string | string[]) => void;\n    isColorInverted: boolean;\n    onColorInvertedToggle: () => void;\n    contrast: number;\n    onContrastChange: (contrast: number) => void;\n    brightness: number;\n    onBrightnessChange: (brightness: number) => void;\n    // textColor: string;\n    // onTextColorChange: (color: string) => void;`\n    // backgroundColor: string;\n    // onBackgroundColorChange: (color: string) => void;\n    useColors: boolean;\n    onUseColorsToggle: () => void;\n}\n\nconst Menu = ({\n    specs,\n    onSpecsChange,\n    onCopy,\n    onImageUpload,\n    onVideoUpload,\n    onResolutionChange,\n    palette,\n    onPaletteChange,\n    isColorInverted,\n    onColorInvertedToggle,\n    contrast,\n    onContrastChange,\n    brightness,\n    onBrightnessChange,\n    useColors,\n    onUseColorsToggle,\n}: // textColor,\n    // onTextColorChange,\n    // backgroundColor,\n    // onBackgroundColorChange,\n    MenuProps): ReactElement => {\n    const imageUploadHandler = (imageFile: File) => {\n        if (imageFile.type === 'image/heic') {\n            // Convert HEIC image to JPEG format\n            try {\n                heic2any({\n                    blob: imageFile,\n                    toType: 'image/jpeg',\n                }).then((convertedBlob) => {\n                    const convertedFile = new File(\n                        [convertedBlob as Blob],\n                        imageFile.name.replace('.heic', '.jpg'),\n                        { type: 'image/jpeg' },\n                    );\n\n                    // Continue processing with the converted image\n                    onImageUpload(convertedFile);\n                });\n\n                // Create a new File instance with the converted blob\n            } catch (error) {\n                console.error('Error converting HEIC image:', error);\n            }\n        } else {\n            onImageUpload(imageFile);\n        }\n    };\n\n    return (\n        <DragDropFiles onDrop={imageUploadHandler}>\n            <div className=\"flex-row\">\n                <div className=\"menu\">\n                    <div className=\"menu-entry\">\n                        <label htmlFor=\"file-upload\" className=\"clickable-button\">\n                            Upload an image\n                        </label>\n                        <input\n                            id=\"file-upload\"\n                            type=\"file\"\n                            accept=\"image/*, .heic\"\n                            onChange={(event) => {\n                                const myFile = event.target.files?.[0];\n                                if (!myFile) {\n                                    return;\n                                }\n                                imageUploadHandler(myFile);\n                            }}\n                        />\n                    </div>\n                    <div className=\"menu-entry\">\n                        <label htmlFor=\"video-upload\" className=\"clickable-button\">\n                            Upload a video\n                        </label>\n                        <input\n                            id=\"video-upload\"\n                            type=\"file\"\n                            accept=\"video/*\"\n                            onChange={(event) => {\n                                const videoFile = event.target.files?.[0];\n                                if (!videoFile) {\n                                    return;\n                                }\n                                onVideoUpload(videoFile);\n                            }}\n                        />\n                    </div>\n                    <SliderSection\n                        specs={specs}\n                        onSpecsChange={onSpecsChange}\n                        onResolutionChange={onResolutionChange}\n                        contrast={contrast}\n                        onContrastChange={onContrastChange}\n                        brightness={brightness}\n                        onBrightnessChange={onBrightnessChange}\n                    />\n                    <Dropdown\n                        label=\"palette\"\n                        options={asciiOptions}\n                        selectedOption={palette}\n                        onOptionChange={onPaletteChange}\n                    />\n                    <Dropdown\n                        label=\"font\"\n                        options={Fonts.map((font: Font) => ({ value: font, label: font }))}\n                        selectedOption={specs.fontFamily}\n                        onOptionChange={(font) => {\n                            onSpecsChange({ ...specs, fontFamily: font as Font });\n                        }}\n                    />\n\n                    <form>\n                        <div className=\"menu-entry\">\n                            <div className=\"checkboxes\">\n                                <label>\n                                    <input\n                                        type=\"checkbox\"\n                                        checked={isColorInverted}\n                                        onChange={onColorInvertedToggle}\n                                    />\n                                    {'inverse?'}\n                                </label>\n                                <label>\n                                    <input\n                                        type=\"checkbox\"\n                                        checked={useColors}\n                                        onChange={onUseColorsToggle}\n                                    />\n                                    {'use colors?'}\n                                </label>\n                            </div>\n                        </div>\n                    </form>\n\n                    <div className=\"menu-entry\">\n                        <label htmlFor=\"clipboard-button\" className=\"clickable-button\">\n                            Save to clipboard\n                        </label>\n\n                        <button id=\"clipboard-button\" className=\"hidden-button\" onClick={onCopy} />\n                    </div>\n                </div>\n            </div>\n        </DragDropFiles>\n    );\n};\n\nexport const MenuContainer = (props: MenuContainerProps): ReactElement => {\n    const { specs, onAsciiChange, onSpecsChange } = props;\n\n    const [currentFile, setCurrentFile] = React.useState<File>();\n    const [isAsciiVideo, setIsAsciiVideo] = React.useState(false);\n\n    // store greyscale so it can be a lookup table (only for images)\n    const greyscale = React.useRef<number[][]>([]);\n    const colors = React.useRef<string[][]>([]);\n\n\n\n    // Simplified updateAscii function - only handles images now\n    const updateAscii = ({\n        palette,\n        isColorInverted,\n        resolution,\n        file,\n        contrast,\n        brightness,\n        resetLookups,\n        useColors,\n    }: {\n        palette: string | string[];\n        isColorInverted: boolean;\n        resolution: number;\n        file: File | undefined;\n        contrast: number;\n        brightness: number;\n        resetLookups: boolean;\n        useColors: boolean;\n    }) => {\n        if (!file) {\n            return;\n        }\n\n        resizeImage({\n            file: file,\n            maxWidth: resolution,\n        }).then((canvas) => {\n            const context = canvas.getContext('2d', {\n                willReadFrequently: true,\n            });\n            const data = context?.getImageData(0, 0, canvas.width, canvas.height);\n            if (!data) {\n                return;\n            }\n\n            // avoid recalculating greyscale for each frame\n            if (resetLookups) {\n                greyscale.current = getGreyscale(data);\n                colors.current = getColors(data);\n            }\n\n            if (useColors) {\n                const coloredAscii = getColoredAsciiFromGreyscale(\n                    greyscale.current,\n                    colors.current,\n                    palette,\n                    isColorInverted,\n                    contrast,\n                    brightness,\n                );\n                onAsciiChange(coloredAscii.ascii, resolution, coloredAscii.colors);\n            } else {\n                const newAscii = getAsciiFromGreyscale(\n                    greyscale.current,\n                    palette,\n                    isColorInverted,\n                    contrast,\n                    brightness,\n                );\n                onAsciiChange(newAscii, resolution);\n            }\n\n            onSpecsChange({\n                ...specs,\n                resolution: resolution,\n            });\n        });\n    };\n\n    const debouncedOnResolutionChange = debounce((resolution: number) => {\n        // For video mode, just update the specs directly since we're using streaming\n        if (isAsciiVideo) {\n            props.onSpecsChange({\n                ...props.specs,\n                resolution: resolution,\n            });\n        } else {\n            updateAscii({\n                palette: props.palette,\n                isColorInverted: props.isColorInverted,\n                resolution,\n                file: currentFile,\n                contrast: props.contrast,\n                brightness: props.brightness,\n                resetLookups: true,\n                useColors: props.useColors,\n            });\n        }\n    }, 5);\n\n    const debouncedOnContrastChange = debounce((contrast: number) => {\n        // For video mode, just update the contrast directly since we're using streaming\n        if (isAsciiVideo) {\n            props.onContrastChange(contrast);\n        } else {\n            updateAscii({\n                palette: props.palette,\n                isColorInverted: props.isColorInverted,\n                resolution: specs.resolution,\n                file: currentFile,\n                contrast,\n                brightness: props.brightness,\n                resetLookups: false,\n                useColors: props.useColors,\n            });\n        }\n    }, 5);\n\n    const debouncedOnBrightnessChange = debounce((brightness: number) => {\n        // For video mode, just update the brightness directly since we're using streaming\n        if (isAsciiVideo) {\n            props.onBrightnessChange(brightness);\n        } else {\n            updateAscii({\n                palette: props.palette,\n                isColorInverted: props.isColorInverted,\n                resolution: specs.resolution,\n                file: currentFile,\n                contrast: props.contrast,\n                brightness,\n                resetLookups: false,\n                useColors: props.useColors,\n            });\n        }\n    }, 5);\n\n    const handleVideoUpload = (videoFile: File) => {\n        // Use the new streaming approach by calling the prop directly\n        props.onVideoUpload(videoFile);\n        // Set the local state to indicate we're in video mode\n        setIsAsciiVideo(true);\n        setCurrentFile(videoFile);\n    };\n\n    return (\n        <Menu\n            {...props}\n            onResolutionChange={debouncedOnResolutionChange}\n            onImageUpload={(imageFile) => {\n                setIsAsciiVideo(false);\n                updateAscii({\n                    palette: props.palette,\n                    isColorInverted: props.isColorInverted,\n                    resolution: specs.resolution,\n                    file: imageFile,\n                    contrast: props.contrast,\n                    brightness: props.brightness,\n                    resetLookups: true,\n                    useColors: props.useColors,\n                });\n                setCurrentFile(imageFile);\n            }}\n            onVideoUpload={handleVideoUpload}\n            palette={props.palette}\n            onPaletteChange={(newPalette) => {\n                props.onPaletteChange(newPalette);\n                // For video mode, just update the palette directly since we're using streaming\n                if (!isAsciiVideo) {\n                    updateAscii({\n                        palette: newPalette,\n                        isColorInverted: props.isColorInverted,\n                        resolution: specs.resolution,\n                        file: currentFile,\n                        brightness: props.brightness,\n                        contrast: props.contrast,\n                        resetLookups: false,\n                        useColors: props.useColors,\n                    });\n                }\n            }}\n            isColorInverted={props.isColorInverted}\n            onColorInvertedToggle={() => {\n                props.onColorInvertedToggle();\n                // For video mode, just update the color inversion directly since we're using streaming\n                if (!isAsciiVideo) {\n                    updateAscii({\n                        palette: props.palette,\n                        isColorInverted: !props.isColorInverted,\n                        resolution: specs.resolution,\n                        file: currentFile,\n                        brightness: props.brightness,\n                        contrast: props.contrast,\n                        resetLookups: false,\n                        useColors: props.useColors,\n                    });\n                }\n            }}\n            contrast={props.contrast}\n            onContrastChange={(contrast) => {\n                props.onContrastChange(contrast);\n                // For video mode, the debounced function will handle it directly\n                // For image mode, it will process through updateAscii\n                debouncedOnContrastChange(contrast);\n            }}\n            brightness={props.brightness}\n            onBrightnessChange={(brightness) => {\n                props.onBrightnessChange(brightness);\n                // For video mode, the debounced function will handle it directly\n                // For image mode, it will process through updateAscii\n                debouncedOnBrightnessChange(brightness);\n            }}\n            useColors={props.useColors}\n            onUseColorsToggle={() => {\n                props.onUseColorsToggle();\n                // For video mode, just update the use colors setting directly since we're using streaming\n                if (!isAsciiVideo) {\n                    updateAscii({\n                        palette: props.palette,\n                        isColorInverted: props.isColorInverted,\n                        resolution: specs.resolution,\n                        file: currentFile,\n                        brightness: props.brightness,\n                        contrast: props.contrast,\n                        resetLookups: false,\n                        useColors: !props.useColors,\n                    });\n                }\n            }}\n        />\n    );\n};\n","import React from 'react';\nimport { getAsciiFromContext, getGreyscale, getColors, getColoredAsciiFromGreyscale } from '../ascii-utils';\n\ninterface ColoredAsciiProps {\n    ascii: string;\n    colors: string[];\n    style: React.CSSProperties;\n}\n\nconst ColoredAscii: React.FC<ColoredAsciiProps> = ({ ascii, colors, style }) => {\n    const lines = ascii.split('\\n');\n    let colorIndex = 0;\n\n    return (\n        <div className=\"ascii\" style={style}>\n            {lines.map((line, lineIndex) => (\n                <div key={lineIndex}>\n                    {line.split('').map((char, charIndex) => {\n                        // Find the next non-empty color (skip newline placeholders)\n                        let color = 'inherit';\n                        while (colorIndex < colors.length && colors[colorIndex] === '') {\n                            colorIndex++;\n                        }\n                        if (colorIndex < colors.length) {\n                            color = colors[colorIndex];\n                            colorIndex++;\n                        }\n                        return (\n                            <span key={charIndex} style={{ color }}>\n                                {char}\n                            </span>\n                        );\n                    })}\n                </div>\n            ))}\n        </div>\n    );\n};\n\ninterface StreamingAsciiVideoProps {\n    videoElement: HTMLVideoElement | null;\n    palette: string | string[];\n    asciiResolution: number;\n    isColorInverted: boolean;\n    contrast: number;\n    brightness: number;\n    useColors?: boolean;\n    frameRate?: number;\n    style?: React.CSSProperties;\n    aspectRatioMultiplier?: number;\n}\n\nexport const StreamingAsciiVideo: React.FC<StreamingAsciiVideoProps> = ({\n    videoElement,\n    palette,\n    asciiResolution,\n    isColorInverted,\n    contrast,\n    brightness,\n    useColors = false,\n    frameRate = 10,\n    style,\n    aspectRatioMultiplier = 0.6,\n}) => {\n\n    React.useEffect(() => {\n        console.log('asciiResolution', asciiResolution);\n    }, [asciiResolution]);\n\n    const [currentFrame, setCurrentFrame] = React.useState<string | { ascii: string; colors: string[] } | null>(null);\n    const canvasRef = React.useRef<HTMLCanvasElement>(null);\n    const contextRef = React.useRef<CanvasRenderingContext2D | null>(null);\n    const animationFrameRef = React.useRef<number | null>(null);\n    const lastFrameTimeRef = React.useRef<number>(0);\n    const lastProcessedTimeRef = React.useRef<number>(0);\n    const canvasInitializedRef = React.useRef<boolean>(false);\n\n    // Initialize canvas and context once when available\n    React.useEffect(() => {\n        if (canvasRef.current && !canvasInitializedRef.current) {\n            const canvas = canvasRef.current;\n            const context = canvas.getContext('2d', { willReadFrequently: true });\n            if (context) {\n                contextRef.current = context;\n                canvasInitializedRef.current = true;\n            }\n        }\n    }, []);\n\n    // Process a single frame from the video\n    const processFrame = React.useCallback((forceUpdate = false) => {\n        try {\n            if (!videoElement || !contextRef.current || !canvasRef.current) {\n                return;\n            }\n\n            const video = videoElement;\n            const context = contextRef.current;\n            const canvas = canvasRef.current;\n\n            // Only process if video time has changed significantly, unless forced update\n            if (!forceUpdate && Math.abs(video.currentTime - lastProcessedTimeRef.current) < 0.05) {\n                return;\n            }\n\n            // Only update the time reference if it's not a forced update\n            if (!forceUpdate) {\n                lastProcessedTimeRef.current = video.currentTime;\n            }\n\n            // Calculate dimensions based on aspect ratio\n            const aspectRatio = video.videoWidth / video.videoHeight;\n            const width = asciiResolution;\n            const height = Math.floor((aspectRatioMultiplier * width) / aspectRatio);\n\n\n\n            // Update canvas size if needed\n            if (canvas.width !== width || canvas.height !== height) {\n                canvas.width = width;\n                canvas.height = height;\n            }\n\n            // Draw current video frame to canvas\n            context.drawImage(video, 0, 0, width, height);\n\n            // Process the frame based on color settings\n            if (useColors) {\n                const imageData = context.getImageData(0, 0, width, height);\n                const greyscale = getGreyscale(imageData);\n                const colors = getColors(imageData);\n                const coloredFrame = getColoredAsciiFromGreyscale(\n                    greyscale,\n                    colors,\n                    palette,\n                    isColorInverted,\n                    contrast,\n                    brightness,\n                );\n                setCurrentFrame(coloredFrame);\n            } else {\n                const frameAscii = getAsciiFromContext(\n                    context,\n                    palette,\n                    isColorInverted,\n                    contrast,\n                    brightness,\n                );\n                setCurrentFrame(frameAscii);\n            }\n        } catch (error) {\n            console.error('Error processing video frame:', error);\n            setCurrentFrame('Error processing video');\n        }\n    }, [videoElement, asciiResolution, palette, isColorInverted, contrast, brightness, useColors]);\n\n    // Start animation loop when video is ready\n    React.useEffect(() => {\n        if (!videoElement || videoElement.readyState < 2) {\n            return;\n        }\n\n\n\n        const animate = (currentTime: number) => {\n            if (!videoElement) {\n                animationFrameRef.current = requestAnimationFrame(animate);\n                return;\n            }\n\n            const timeSinceLastFrame = currentTime - lastFrameTimeRef.current;\n            const targetFrameTime = 1000 / frameRate;\n\n            if (timeSinceLastFrame >= targetFrameTime) {\n                processFrame();\n                lastFrameTimeRef.current = currentTime;\n            }\n\n            animationFrameRef.current = requestAnimationFrame(animate);\n        };\n\n        animationFrameRef.current = requestAnimationFrame(animate);\n\n        return () => {\n            if (animationFrameRef.current) {\n                cancelAnimationFrame(animationFrameRef.current);\n            }\n        };\n    }, [videoElement, processFrame, frameRate]);\n\n    // Process initial frame when video is ready\n    React.useEffect(() => {\n        if (videoElement && videoElement.readyState >= 2) {\n            processFrame();\n        }\n    }, [videoElement, processFrame]);\n\n    // Process frame immediately when props change (for instant updates)\n    React.useEffect(() => {\n        if (videoElement && videoElement.readyState >= 2) {\n            processFrame(true);\n        }\n    }, [palette, asciiResolution, isColorInverted, contrast, brightness, useColors, processFrame]);\n\n    // Hidden canvas for processing\n    const canvasStyle: React.CSSProperties = {\n        position: 'absolute',\n        left: '-9999px',\n        top: '-9999px',\n        width: '1px',\n        height: '1px',\n        opacity: 0,\n        pointerEvents: 'none',\n    };\n\n    return (\n        <>\n            <canvas ref={canvasRef} style={canvasStyle} />\n            {!currentFrame || !videoElement || videoElement.readyState < 2 ? (\n                <div className=\"ascii\" style={style}>Loading...</div>\n            ) : typeof currentFrame === 'string' ? (\n                <div className=\"ascii\" style={style}>{currentFrame}</div>\n            ) : (\n                <ColoredAscii\n                    ascii={currentFrame.ascii}\n                    colors={currentFrame.colors}\n                    style={style || {}}\n                />\n            )}\n        </>\n    );\n};\n\n// Legacy component for backward compatibility\nexport const AsciiVideo = ({\n    asciiFrames,\n    frameRate = 10,\n    style,\n}: {\n    asciiFrames: string[] | { ascii: string; colors: string[] }[];\n    frameRate?: number;\n    style?: React.CSSProperties;\n}): JSX.Element | null => {\n    if (asciiFrames.length === 0) {\n        return null;\n    }\n\n    const [currentFrameIndex, setCurrentFrameIndex] = React.useState(0);\n\n    React.useEffect(() => {\n        const interval = setInterval(() => {\n            setCurrentFrameIndex((prevIndex) => (prevIndex + 1) % asciiFrames.length);\n        }, 1000 / frameRate);\n\n        return () => clearInterval(interval);\n    }, [asciiFrames.length, frameRate]);\n\n    const currentFrame = asciiFrames[currentFrameIndex];\n\n    if (typeof currentFrame === 'string') {\n        return <div style={style}>{currentFrame}</div>;\n    } else {\n        return (\n            <ColoredAscii\n                ascii={currentFrame.ascii}\n                colors={currentFrame.colors}\n                style={style || {}}\n            />\n        );\n    }\n};\n","import React from 'react';\n\ninterface StreamingVideoProcessorProps {\n    videoFile: File | null;\n    onVideoElementReady: (videoElement: HTMLVideoElement) => void;\n    onError?: (error: string) => void;\n}\n\nexport const StreamingVideoProcessor: React.FC<StreamingVideoProcessorProps> = ({\n    videoFile,\n    onVideoElementReady,\n    onError,\n}) => {\n    const videoRef = React.useRef<HTMLVideoElement>(null);\n\n    React.useEffect(() => {\n        if (!videoFile || !videoRef.current) return;\n\n        const video = videoRef.current;\n        const videoUrl = URL.createObjectURL(videoFile);\n\n        const handleLoadedMetadata = () => {\n            console.log('Video loaded metadata - calling onVideoElementReady');\n            onVideoElementReady(video);\n            // Start playing automatically\n            video.play().catch((error) => {\n                console.warn('Auto-play failed:', error);\n                onError?.('Auto-play failed: ' + error.message);\n            });\n        };\n\n        const handleError = (event: Event) => {\n            const error = event.target as HTMLVideoElement;\n            console.error('Video loading error:', error.error);\n            onError?.('Failed to load video file: ' + (error.error?.message || 'Unknown error'));\n        };\n\n        const handleEnded = () => {\n            // Loop the video\n            video.currentTime = 0;\n            video.play().catch((error) => {\n                console.warn('Loop play failed:', error);\n                onError?.('Loop play failed: ' + error.message);\n            });\n        };\n\n        video.addEventListener('loadedmetadata', handleLoadedMetadata);\n        video.addEventListener('error', handleError);\n        video.addEventListener('ended', handleEnded);\n\n        video.src = videoUrl;\n\n        return () => {\n            video.removeEventListener('loadedmetadata', handleLoadedMetadata);\n            video.removeEventListener('error', handleError);\n            video.removeEventListener('ended', handleEnded);\n            URL.revokeObjectURL(videoUrl);\n        };\n    }, [videoFile, onVideoElementReady, onError]);\n\n    if (!videoFile) {\n        return null;\n    }\n\n    return (\n        <video\n            ref={videoRef}\n            style={{ display: 'none' }}\n            controls={false}\n            muted\n            playsInline\n            loop\n        />\n    );\n};\n\n// Hook for managing video playback state\nexport const useVideoPlayback = (videoElement: HTMLVideoElement | null) => {\n    const [isPlaying, setIsPlaying] = React.useState(false);\n    const [currentTime, setCurrentTime] = React.useState(0);\n    const [duration, setDuration] = React.useState(0);\n\n    React.useEffect(() => {\n        if (!videoElement) return;\n\n        const handleTimeUpdate = () => {\n            setCurrentTime(videoElement.currentTime);\n        };\n\n        const handleLoadedMetadata = () => {\n            setDuration(videoElement.duration);\n        };\n\n        const handlePlay = () => {\n            setIsPlaying(true);\n        };\n\n        const handlePause = () => {\n            setIsPlaying(false);\n        };\n\n        const handleEnded = () => {\n            setIsPlaying(false);\n        };\n\n        videoElement.addEventListener('timeupdate', handleTimeUpdate);\n        videoElement.addEventListener('loadedmetadata', handleLoadedMetadata);\n        videoElement.addEventListener('play', handlePlay);\n        videoElement.addEventListener('pause', handlePause);\n        videoElement.addEventListener('ended', handleEnded);\n\n        return () => {\n            videoElement.removeEventListener('timeupdate', handleTimeUpdate);\n            videoElement.removeEventListener('loadedmetadata', handleLoadedMetadata);\n            videoElement.removeEventListener('play', handlePlay);\n            videoElement.removeEventListener('pause', handlePause);\n            videoElement.removeEventListener('ended', handleEnded);\n        };\n    }, [videoElement]);\n\n    const play = React.useCallback(() => {\n        if (videoElement) {\n            videoElement.play();\n        }\n    }, [videoElement]);\n\n    const pause = React.useCallback(() => {\n        if (videoElement) {\n            videoElement.pause();\n        }\n    }, [videoElement]);\n\n    const seek = React.useCallback((time: number) => {\n        if (videoElement) {\n            videoElement.currentTime = time;\n        }\n    }, [videoElement]);\n\n    const restart = React.useCallback(() => {\n        if (videoElement) {\n            videoElement.currentTime = 0;\n            videoElement.play();\n        }\n    }, [videoElement]);\n\n    return {\n        isPlaying,\n        currentTime,\n        duration,\n        play,\n        pause,\n        seek,\n        restart,\n    };\n}; ","import './index.css';\nimport React from 'react';\nimport { MenuContainer as Menu } from './ui/Menu/Menu';\nimport { StreamingAsciiVideo } from './video/asciiVideo';\nimport { StreamingVideoProcessor } from './video/streaming-video-processor';\nimport { getAsciiFromContext, getGreyscale, getColors, getColoredAsciiFromGreyscale } from './ascii-utils';\n\nexport const Fonts = [\n    'Ibm Plex Mono',\n    'Azeret Mono',\n    'Space Mono',\n    'Roboto Mono',\n    'Courier New',\n    'Monaco',\n    'Arial',\n    'Helvetica',\n];\n\nexport type Font = (typeof Fonts)[number];\n\nexport interface SpecsState {\n    fontSize: number;\n    resolution: number;\n    width: number;\n    zoom: number;\n    weight: number;\n    fontFamily: Font;\n    kerning: number;\n    lineHeight: number;\n}\n\ninterface ColoredAsciiProps {\n    ascii: string;\n    colors: string[];\n    style: React.CSSProperties;\n}\n\nconst ColoredAscii: React.FC<ColoredAsciiProps> = ({ ascii, colors, style }) => {\n    const lines = ascii.split('\\n');\n    let colorIndex = 0;\n\n    return (\n        <div className=\"ascii\" style={style}>\n            {lines.map((line, lineIndex) => (\n                <div key={lineIndex}>\n                    {line.split('').map((char, charIndex) => {\n                        let color = 'inherit';\n                        while (colorIndex < colors.length && colors[colorIndex] === '') {\n                            colorIndex++;\n                        }\n                        if (colorIndex < colors.length) {\n                            color = colors[colorIndex];\n                            colorIndex++;\n                        }\n                        return (\n                            <span key={charIndex} style={{ color }}>\n                                {char}\n                            </span>\n                        );\n                    })}\n                </div>\n            ))}\n        </div>\n    );\n};\n\nconst App: React.FC = () => {\n    // Core state\n    const [specs, setSpecs] = React.useState<SpecsState>({\n        fontSize: 30,\n        resolution: 100,\n        width: 700,\n        zoom: 1,\n        weight: 400,\n        fontFamily: 'Ibm Plex Mono',\n        kerning: 0,\n        lineHeight: 1,\n    });\n\n    // Video streaming state\n    const [videoFile, setVideoFile] = React.useState<File | null>(null);\n    const [videoElement, setVideoElement] = React.useState<HTMLVideoElement | null>(null);\n    const [isStreamingVideo, setIsStreamingVideo] = React.useState(false);\n\n    // Image state (for non-video files)\n    const [imageAscii, setImageAscii] = React.useState<string>('');\n    const [imageColors, setImageColors] = React.useState<string[]>([]);\n\n    // Visual settings\n    const [selectedPalette, setSelectedPalette] = React.useState<string | string[]>('8M0|*|::`,.');\n    const [isColorInverted, setIsColorInverted] = React.useState(false);\n    const [useColors, setUseColors] = React.useState(false);\n    const [contrast, setContrast] = React.useState(1);\n    const [brightness, setBrightness] = React.useState(0);\n\n    // Video playback controls (removed since we're not adding video controls)\n\n    const lineHeight = 1000 / specs.resolution;\n\n    // Handle video upload - go directly to streaming mode\n    const handleVideoUpload = (file: File) => {\n        console.log('handleVideoUpload called with file:', file.name);\n        setVideoFile(file);\n        setIsStreamingVideo(true);\n        // Clear any existing image\n        setImageAscii('');\n        setImageColors([]);\n    };\n\n    // Handle image upload - process immediately\n    const handleImageUpload = (file: File) => {\n        setVideoFile(null);\n        setIsStreamingVideo(false);\n\n        // Process image immediately using the existing utils\n        const canvas = document.createElement('canvas');\n        const context = canvas.getContext('2d');\n        const img = new Image();\n\n        img.onload = () => {\n            const aspectRatio = img.width / img.height;\n            const width = specs.resolution;\n            const height = Math.floor((0.6 * width) / aspectRatio); // Using same multiplier as video\n\n            canvas.width = width;\n            canvas.height = height;\n            context?.drawImage(img, 0, 0, width, height);\n\n            if (useColors) {\n                const imageData = context?.getImageData(0, 0, width, height);\n                if (imageData) {\n                    const greyscale = getGreyscale(imageData);\n                    const colors = getColors(imageData);\n                    const coloredAscii = getColoredAsciiFromGreyscale(\n                        greyscale,\n                        colors,\n                        selectedPalette,\n                        isColorInverted,\n                        contrast,\n                        brightness,\n                    );\n                    setImageAscii(coloredAscii.ascii);\n                    setImageColors(coloredAscii.colors);\n                }\n            } else {\n                if (context) {\n                    const frameAscii = getAsciiFromContext(\n                        context,\n                        selectedPalette,\n                        isColorInverted,\n                        contrast,\n                        brightness,\n                    );\n                    setImageAscii(frameAscii);\n                    setImageColors([]);\n                }\n            }\n        };\n\n        img.src = URL.createObjectURL(file);\n    };\n\n    // Legacy handler for Menu compatibility (does nothing for videos now)\n    const handleAsciiChange = (asciiData: string | string[] | { ascii: string; colors: string[] }[], resolution: number, colors?: string[]) => {\n        // Only handle image data, ignore video data since we're streaming\n        if (typeof asciiData === 'string') {\n            setImageAscii(asciiData);\n            setImageColors(colors || []);\n        }\n    };\n\n    return (\n        <div className=\"flex-container\">\n            <Menu\n                specs={specs}\n                onSpecsChange={setSpecs}\n                onAsciiChange={handleAsciiChange}\n                onCopy={() => {\n                    const textToCopy = isStreamingVideo\n                        ? \"Video streaming - use browser copy on the ASCII output\"\n                        : imageAscii;\n                    navigator.clipboard.writeText(textToCopy);\n                }}\n                onVideoUpload={handleVideoUpload}\n                onImageUpload={handleImageUpload}\n                palette={selectedPalette}\n                onPaletteChange={setSelectedPalette}\n                isColorInverted={isColorInverted}\n                onColorInvertedToggle={() => setIsColorInverted(v => !v)}\n                contrast={contrast}\n                onContrastChange={setContrast}\n                brightness={brightness}\n                onBrightnessChange={setBrightness}\n                useColors={useColors}\n                onUseColorsToggle={() => setUseColors(v => !v)}\n            />\n\n            {/* Hidden video element for streaming */}\n            <StreamingVideoProcessor\n                videoFile={videoFile}\n                onVideoElementReady={setVideoElement}\n            />\n\n            <pre>\n                {isStreamingVideo && videoElement ? (\n                    <StreamingAsciiVideo\n                        videoElement={videoElement}\n                        palette={selectedPalette}\n                        asciiResolution={specs.resolution}\n                        isColorInverted={isColorInverted}\n                        contrast={contrast}\n                        brightness={brightness}\n                        useColors={useColors}\n                        frameRate={10}\n                        style={{\n                            fontSize: `${lineHeight * 1 * specs.zoom}px`,\n                            lineHeight: `${lineHeight * specs.zoom}px`,\n                            fontWeight: specs.weight,\n                            fontFamily: specs.fontFamily,\n                            letterSpacing: `${specs.kerning}px`,\n                        }}\n                        aspectRatioMultiplier={0.6}\n                    />\n                ) : imageAscii ? (\n                    imageColors.length > 0 ? (\n                        <ColoredAscii\n                            ascii={imageAscii}\n                            colors={imageColors}\n                            style={{\n                                fontSize: `${lineHeight * 1 * specs.zoom}px`,\n                                lineHeight: `${lineHeight * specs.zoom}px`,\n                                fontWeight: specs.weight,\n                                fontFamily: specs.fontFamily,\n                                letterSpacing: `${specs.kerning}px`,\n                            }}\n                        />\n                    ) : (\n                        <div\n                            className=\"ascii\"\n                            style={{\n                                fontSize: `${lineHeight * 1 * specs.zoom}px`,\n                                lineHeight: `${lineHeight * specs.zoom}px`,\n                                fontWeight: specs.weight,\n                                fontFamily: specs.fontFamily,\n                                letterSpacing: `${specs.kerning}px`,\n                            }}>\n                            {imageAscii}\n                        </div>\n                    )\n                ) : (\n                    <div\n                        className=\"ascii\"\n                        style={{\n                            fontSize: `${lineHeight * 1 * specs.zoom}px`,\n                            lineHeight: `${lineHeight * specs.zoom}px`,\n                            fontWeight: specs.weight,\n                            fontFamily: specs.fontFamily,\n                            letterSpacing: `${specs.kerning}px`,\n                        }}>\n                        &apos;((-.-)/^&apos;\n                    </div>\n                )}\n            </pre>\n        </div>\n    );\n};\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}